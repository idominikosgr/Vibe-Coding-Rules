{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MDC Rule Schema",
  "description": "Schema for CodePilot MDC rule files",
  "type": "object",
  "properties": {
    "title": {
      "type": "string",
      "description": "Title of the rule"
    },
    "description": {
      "type": "string",
      "description": "Short description of the rule"
    },
    "version": {
      "type": "string",
      "description": "Semantic version of the rule",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$"
    },
    "author": {
      "type": "string",
      "description": "Author of the rule"
    },
    "lastUpdated": {
      "type": "string",
      "description": "Date the rule was last updated",
      "format": "date"
    },
    "alwaysApply": {
      "type": "boolean",
      "description": "Whether the rule should always be applied"
    },
    "tags": {
      "type": "array",
      "description": "Tags associated with the rule",
      "items": {
        "type": "string"
      }
    },
    "globs": {
      "type": "array",
      "description": "Glob patterns for files the rule applies to",
      "items": {
        "type": "string"
      }
    },
    "compatibleWith": {
      "type": "object",
      "description": "Compatibility information",
      "properties": {
        "ides": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "aiAssistants": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "frameworks": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "examples": {
      "type": "object",
      "description": "Code examples",
      "properties": {
        "good": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "bad": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "required": ["title", "description", "version"]
}
